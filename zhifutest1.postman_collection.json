{
	"info": {
		"_postman_id": "cbbbe072-74d7-4cee-9c86-b0517b9e066b",
		"name": "zhifutest1",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "0）前置条件 Copy",
			"item": [
				{
					"name": "0.0）通用",
					"item": [
						{
							"name": "0.0  时间处理",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "2bdf491c-6b5a-4440-b6fc-c148fb43d4bd",
										"exec": [
											"var moment = require('moment')",
											"",
											"",
											"// 正确时间格式",
											"var res = moment(Date.now()).format('YYYYMMDDHHmmss');",
											"pm.globals.set(\"now\", res);",
											"",
											"// YYYYMMDD",
											"var res2 = moment(Date.now()).format('YYYYMMDD');",
											"pm.globals.set(\"now2\", res2);",
											"",
											"// YYYY-MM-DD",
											"var res3 = moment(Date.now()).format('YYYY-MM-DD');",
											"pm.globals.set(\"now3\", res3);",
											"",
											"// YYYY/MM/DD",
											"var res31 = moment(Date.now()).format('YYYY/MM/DD');",
											"pm.globals.set(\"now31\", res31);",
											"",
											"// hhmmss",
											"var res4 = moment(Date.now()).format('hhmmss');",
											"pm.globals.set(\"now4\", res4);",
											"",
											"// YYYYMMDDHHmmss123",
											"var res5 = moment(Date.now()).format('YYYYMMDDHHmmss1');",
											"pm.globals.set(\"now5\", res5);",
											"",
											"// 时间戳",
											"pm.globals.set(\"now6\", Date.now());",
											"",
											"// 晚于当前时间",
											"var res7 = moment((Date.now())+(10*60*1000)).format('YYYYMMDDHHmmss');",
											"pm.globals.set(\"now7\", res7);",
											"",
											"// 早于当前时间-30分钟（31分钟）",
											"var res8 = moment((Date.now())-(31*60*1000)).format('YYYYMMDDHHmmss');",
											"pm.globals.set(\"now8\", res8);",
											"",
											"// 当前时间至当前时间-30分钟之内(29分钟内)",
											"var res9 = moment((Date.now())-(1*60*1000)).format('YYYYMMDDHHmmss');",
											"pm.globals.set(\"now9\", res9);",
											"",
											"// 今天",
											"var res10 = moment(Date.now()).format('YYYYMMDD');",
											"pm.globals.set(\"now10\", res10);",
											"",
											"// 昨天",
											"var res11 = moment(Date.now()-(1440*60*1000)).format('YYYYMMDD');",
											"pm.globals.set(\"now11\", res11);",
											"",
											"// 明天",
											"var res12 = moment(Date.now()+(1440*60*1000)).format('YYYYMMDD');",
											"pm.globals.set(\"now12\", res12);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "d0e6433f-e809-49d6-8270-f645fa65916a",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": "http://mail.qq.com"
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "0.1）连通性",
					"item": [
						{
							"name": "0.1  连通性orderNo",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "2bdf491c-6b5a-4440-b6fc-c148fb43d4bd",
										"exec": [
											"pm.globals.set(\"LT1\"\t, \"bLT1\");\r",
											"pm.globals.set(\"LT2\"\t, \"bLT2\");\r",
											"pm.globals.set(\"LT3\"\t, \"bLT3\");\r",
											"pm.globals.set(\"LT4\"\t, \"bLT4\");\r",
											"pm.globals.set(\"LT5\"\t, \"bLT5\");\r",
											"pm.globals.set(\"LT6\"\t, \"bLT6\");\r",
											"pm.globals.set(\"LT7\"\t, \"bLT7\");\r",
											"pm.globals.set(\"LT8\"\t, \"bLT8\");\r",
											"pm.globals.set(\"LT9\"\t, \"bLT9\");\r",
											"pm.globals.set(\"LT10\"\t, \"bLT10\");\r",
											"pm.globals.set(\"LT11\"\t, \"bLT11\");\r",
											"pm.globals.set(\"LT12\"\t, \"bLT12\");\r",
											"pm.globals.set(\"LT13\"\t, \"bLT13\");\r",
											"pm.globals.set(\"LT14\"\t, \"bLT14\");\r",
											"pm.globals.set(\"LT15\"\t, \"bLT15\");\r",
											"pm.globals.set(\"LT16\"\t, \"bLT16\");\r",
											"pm.globals.set(\"LT17\"\t, \"bLT17\");\r",
											"pm.globals.set(\"LT18\"\t, \"bLT18\");\r",
											"pm.globals.set(\"LT19\"\t, \"bLT19\");\r",
											"pm.globals.set(\"LT20\"\t, \"bLT20\");\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "d0e6433f-e809-49d6-8270-f645fa65916a",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": "http://mail.qq.com"
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "f8fa5464-1cd7-4c0d-a0d2-17bd7c5cec45",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "e7866f17-ede6-4c74-891b-0b0b1c9b71da",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "1）接口连通性验证",
			"item": [
				{
					"name": "1.1  微信免密签约 Copy",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "93fbd3f0-df55-447b-967c-85559219f9dd",
								"exec": [
									"// 首先判断 status 是否成功\r",
									"if(responseCode.code === 200){ \r",
									"    //将返回数据解析成json格式\r",
									"    var jsonData = JSON.parse(responseBody);\r",
									"    //定义环境变量sign1用做后续使用\r",
									"    var sign1 = jsonData.date;\r",
									"    pm.environment.set(\"sign1\", jsonData.date);\r",
									"    \r",
									"    // 判断测试是否通过\r",
									"    if(jsonData.date !== ''){\r",
									"        tests[\"响应数据判断true\"] = true;\r",
									"        \r",
									"    }\r",
									"    else{\r",
									"        tests[\"响应数据判断false\"] = false;\r",
									"    }\r",
									"    \r",
									"}else{\r",
									"    //响应值不是200时的输出\r",
									"    tests[responseCode.code] = true;\r",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "953f4de3-d1e4-42af-9c50-070c2e1d158f",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"version\":\"v1.0.0\",\n\t\"merNo\":\"{{shanghuidpay11}}\",\n\t\"signType\":\"RSA\",\n\t\"orderNo\":\"{{now9}}1\",\n\t\"dateTime\":\"{{now9}}\",\n\t\"notifyUrl\":\"http://shiyujun.cn\",\n\t\"returnUrl\":\"http://shiyujun.cn\",\n\t\"registerWayCode\":\"wechat\",\n\t\"userId\":\"{{userid1}}\",\n\t\"planId\":\"{{planid1}}\",\n\t\"accountName\":\"{{userid1}}\",\n\t\"appType\":\"ios\",\n\t\"scene\":\"app\",\n\t\"clientIp\":\"{{ip1}}\",\n\t\"appId\":\"{{appid1}}\",\n\t\"field1\":\"预留字段1\",\n\t\"field2\":\"预留字段2\",\n\t\"field3\":\"预留字段3\",\n\t\"privateKey\":\"{{siyao11}}\"\n}"
						},
						"url": "{{qianming}}"
					},
					"response": []
				},
				{
					"name": "1.1  微信免密签约--验签 Copy",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "872e5cd1-d77e-4399-9884-a38716e657eb",
								"exec": [
									"// 设置前置变量，获取shanghuidpay11的商户号\r",
									"var a1 = pm.environment.get(\"shanghuidpay11\"); \r",
									"\r",
									"// 首先判断 status 是否成功\r",
									"if(responseCode.code === 200){ \r",
									"    //将返回数据解析成json格式\r",
									"    var jsonData = JSON.parse(responseBody);\r",
									"    \r",
									"    // 判断测试是否通过\r",
									"    if(jsonData.respCode == \"000000\" && jsonData.respMsg == \"成功\" && jsonData.merNo == a1 && jsonData.registerUrl != null && jsonData.status == 1 && jsonData.sign != null){\r",
									"        tests[\"响应数据判断true\"] = true;\r",
									"    }\r",
									"    else{\r",
									"        tests[\"响应数据判断false\"] = false;\r",
									"    }\r",
									"    \r",
									"}else{\r",
									"    tests[responseCode.code] = true;\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"version\":\"v1.0.0\",\n\t\"merNo\":\"{{shanghuidpay11}}\",\n\t\"signType\":\"RSA\",\n\t\"orderNo\":\"{{now9}}1\",\n\t\"dateTime\":\"{{now9}}\",\n\t\"notifyUrl\":\"http://shiyujun.cn\",\n\t\"returnUrl\":\"http://shiyujun.cn\",\n\t\"registerWayCode\":\"wechat\",\n\t\"userId\":\"{{userid1}}\",\n\t\"planId\":\"{{planid1}}\",\n\t\"accountName\":\"{{userid1}}\",\n\t\"appType\":\"ios\",\n\t\"scene\":\"app\",\n\t\"clientIp\":\"{{ip1}}\",\n\t\"appId\":\"{{appid1}}\",\n\t\"field1\":\"预留字段1\",\n\t\"field2\":\"预留字段2\",\n\t\"field3\":\"预留字段3\",\n\t\"sign\":\"{{sign1}}\"\n}"
						},
						"url": "{{yanqian}}contract"
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "00）清除环境变量 Copy",
			"item": [
				{
					"name": "00.0）通用",
					"item": [
						{
							"name": "00.0.1  清除时间",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "2bdf491c-6b5a-4440-b6fc-c148fb43d4bd",
										"exec": [
											"pm.globals.unset(\"now\");",
											"pm.globals.unset(\"now2\");",
											"pm.globals.unset(\"now3\");",
											"pm.globals.unset(\"now4\");",
											"pm.globals.unset(\"now5\");",
											"pm.globals.unset(\"now6\");",
											"pm.globals.unset(\"now7\");",
											"pm.globals.unset(\"now8\");",
											"pm.globals.unset(\"now9\");",
											"pm.globals.unset(\"now10\");",
											"pm.globals.unset(\"now11\");",
											"pm.globals.unset(\"now12\");"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "d0e6433f-e809-49d6-8270-f645fa65916a",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": "http://mail.qq.com"
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "00.1）连通性",
					"item": [
						{
							"name": "00.1.1  清除连通性orderNo",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "2bdf491c-6b5a-4440-b6fc-c148fb43d4bd",
										"exec": [
											"pm.globals.unset(\"LT1\");\r",
											"pm.globals.unset(\"LT2\");\r",
											"pm.globals.unset(\"LT3\");\r",
											"pm.globals.unset(\"LT4\");\r",
											"pm.globals.unset(\"LT5\");\r",
											"pm.globals.unset(\"LT6\");\r",
											"pm.globals.unset(\"LT7\");\r",
											"pm.globals.unset(\"LT8\");\r",
											"pm.globals.unset(\"LT9\");\r",
											"pm.globals.unset(\"LT10\");\r",
											"pm.globals.unset(\"LT11\");\r",
											"pm.globals.unset(\"LT12\");\r",
											"pm.globals.unset(\"LT13\");\r",
											"pm.globals.unset(\"LT14\");\r",
											"pm.globals.unset(\"LT15\");\r",
											"pm.globals.unset(\"LT16\");\r",
											"pm.globals.unset(\"LT17\");\r",
											"pm.globals.unset(\"LT18\");\r",
											"pm.globals.unset(\"LT19\");\r",
											"pm.globals.unset(\"LT20\");\r",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "d0e6433f-e809-49d6-8270-f645fa65916a",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": "http://mail.qq.com"
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"protocolProfileBehavior": {}
}